'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _remark = require('remark');

var _remark2 = _interopRequireDefault(_remark);

var _remarkHtml = require('remark-html');

var _remarkHtml2 = _interopRequireDefault(_remarkHtml);

var _remarkHighlight = require('remark-highlight.js');

var _remarkHighlight2 = _interopRequireDefault(_remarkHighlight);

var _remarkSlug = require('remark-slug');

var _remarkSlug2 = _interopRequireDefault(_remarkSlug);

var _remarkAutolinkHeadings = require('remark-autolink-headings');

var _remarkAutolinkHeadings2 = _interopRequireDefault(_remarkAutolinkHeadings);

var _stripMarkdown = require('strip-markdown');

var _stripMarkdown2 = _interopRequireDefault(_stripMarkdown);

var _trimNewlines = require('trim-newlines');

var _trimNewlines2 = _interopRequireDefault(_trimNewlines);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = (0, _remark2.default)();
app.use([_remarkSlug2.default, _remarkAutolinkHeadings2.default, _remarkHtml2.default]);

var mdStrip = (0, _remark2.default)();
mdStrip.use(_stripMarkdown2.default);

exports.default = function (file) {
  var markdown = _fs2.default.readFileSync(file).toString('utf8');

  var _app$processSync = app.processSync(markdown),
      contents = _app$processSync.contents;

  var striped = mdStrip.processSync(markdown);

  return { contents: contents, markdown: (0, _trimNewlines2.default)(striped.contents) };
};